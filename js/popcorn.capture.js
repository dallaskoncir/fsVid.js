!function(t,e,i){var a=i,n={type:"png",set:!0,at:null,target:null,reload:!0};e.prototype.capture=function(t){var i,s,r,h,d,o=e.extend({},n,t),l=this.position(),c="popcorn-canvas-"+this.media.id,u=a.getElementById(c);return o.at&&(o.at=e.util.toSeconds(o.at),d=this.currentTime(),this.currentTime(o.at)),u||(u=a.createElement("canvas"),u.id=c,u.width=l.width,u.height=l.height,u.style.display="none",this.media.parentNode.appendChild(u)),i=u.getContext("2d"),r=function(){i.drawImage(this.media,0,0,l.width,l.height),s=u.toDataURL("image/"+o.type),o.target&&(h=a.querySelectorAll(o.target),h.length&&e.forEach(h,function(t){"IMG"===t.nodeName&&(t.src=s)})),o.set&&this.media.setAttribute("poster",s),o.at&&this.listen("loaded",function(){this.currentTime(d)}),o.reload&&this.media.load(),this.unlisten("seeked",r),this.trigger("captured")},this.listen("seeked",r),o.at||r.call(this),this}}(this,this.Popcorn,this.document);